var masterGuy={categoryState:0,categoryScroll:function(){var t=$("#nav-more");t.on("mouseenter",function(){masterGuy.categoryState%2?($(".nav-main").animate({top:0},300),t.find("span").html("更多"),t.find("i").css("background",'url("http://static4.biyao.com/pc/common/img/master/category-up.png") 100% 25% no-repeat')):($(".nav-main").animate({top:"-37px"},300),t.find("span").html("返回"),t.find("i").css("background",'url("http://static.biyao.com/pc/common/img/master/category-down.png") 100% 25% no-repeat')),masterGuy.categoryState++})},categoryBarScroll:function(){var t=$(".nav");$(window).on("scroll",function(){$("body").scrollTop()>=80||document.documentElement.scrollTop>=80?t.addClass("retract"):t.removeClass("retract")})},categoryShow:function(){$(".nav-main > li").hover(function(){$(".nav-main > li").each(function(t){masterGuy.categoryState%2?8>=t&&$(this).css("visibility","hidden"):t>8&&$(this).css("visibility","hidden")}),$(".nav-normal div").css("overflow","visible"),masterGuy.activeNav.removeClass("nav-active"),$(this).children("a").addClass("nav-active")},function(){$(".nav-normal div").css("overflow","hidden"),$(".nav-main > li").css("visibility","visible"),$(this).children("a").removeClass("nav-active"),masterGuy.activeNav.addClass("nav-active")})},sideBarScroll:function(){$(window).on("scroll",function(){$("body").scrollTop()>0||document.documentElement.scrollTop>0?$(".rightBar-top").fadeIn():$(".rightBar-top").fadeOut()}),$(".rightBar-top").on("click",function(){$("body").scrollTop(0)&&(document.documentElement.scrollTop=0)}),window.shareHandle=function(t){$(".rightBar-share").on("click",function(){$(".shareCon").show()}),$(".shareCon b").click(function(){$(".shareCon").fadeOut()});var o="顶级制造商，奢侈品质，成本价格，赶快去购买吧 >>",e="快将必要分享给小伙伴吧",n=window.location.href,a="http://static.biyao.com/pc/common/img/logo.png";$(".share-code").attr("src",window.ControllerSite+"/RequestAPI/getQRCode?url="+encodeURIComponent(t)),$(".share-qq a").attr("href","http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(n)+"&title="+encodeURIComponent(o)+"&site=&pics="+a),$(".share-sina a").attr("href","http://v.t.sina.com.cn/share/share.php?title="+encodeURIComponent(e)+"&url="+encodeURIComponent(n)+"&source=bookmark&pic="+a+"&searchPic=false"),$(".share-facebook a").attr("href","http://www.facebook.com/sharer.php?u="+encodeURIComponent(n)+"&amp;t="+encodeURIComponent(o)),$(".share-twitter a").attr("href","http://twitter.com/intent/tweet?url="+encodeURIComponent(n)+"&amp;text="+encodeURIComponent(o))}},jumpLogin:function(){window.location.href=window.ControllerSite+"/account/login.html?returnUrl="+encodeURI(window.location.href)},jumpRegister:function(){window.location.href=window.ControllerSite+"/account/register.html?returnUrl="+encodeURI(window.location.href)},jumpSupCenter:function(){$.ajax({type:"post",url:window.ControllerSite+"/SupplierCenter/GetSkipto",async:!1,data:{},dataType:"json",success:function(t){window.location.href=t.success?"http://sj.biyao.com":"http://www.biyao.com/minisite/sjzx"},error:function(){window.location.href="http://www.biyao.com/minisite/sjzx"}})},getLoginData:function(){$.ajax({url:window.ControllerSite+"/home/getDataForHomePage",dataType:"jsonp",jsonp:"callback",data:{uid:$.cookie("uid")},success:function(t){1==t.success&&($(".user-out").remove(),$(".header-user").prepend('<div class="user-login"><span> <a href="'+window.ControllerSite+'/MyCenters/MyOrder.html">Hi,'+t.nickname+'</a><a href="'+window.ControllerSite+'/account/logout">[退出]</a></span></div>'))}})},getShopCarData:function(){$.ajax({dataType:"jsonp",type:"post",jsonp:"jsonpcallback",data:"",url:window.ControllerSite+"/RequestAPI/getCartNum",contentType:"application/x-www-form-urlencoded;charset=utf-8",success:function(t){if(1==t.success){var o=t.data.num;$("#shopCar").html(o||0),$("#subShopCar").html(o||0)}}})},init:function(){var t=this;this.categoryScroll(),this.categoryShow(),this.categoryBarScroll(),this.sideBarScroll(),$("#supCenter").click(t.jumpSupCenter),$("#loginBtn,#subLoginBtn").click(t.jumpLogin),$("#registBtn,#subRegistBtn").click(t.jumpRegister),$.cookie("uid")&&this.getLoginData(),($.cookie("uid")||$.cookie("DZVISIT"))&&this.getShopCarData(),masterGuy.activeNav=$(".nav-normal div > a:first-child"),masterGuy.activeNav.addClass("nav-active")}};$(function(){masterGuy.init()});